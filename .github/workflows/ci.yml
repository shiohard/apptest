name: Python Test Assignment

on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      # 1. 拉取代码
      - uses: actions/checkout@v4

      # 2. 设置 Python 3.11 环境
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      # 3. 安装依赖 (会读取您刚才创建的 requirements.txt)
      - run: pip install -r requirements.txt

      # 4. 运行测试并生成报告
      # 注意：这里会自动寻找当前目录下的 test_*.py 文件
      - run: pytest --html=report.html --self-contained-html